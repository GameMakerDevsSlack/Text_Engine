 ,,, ,,,,,,, ,,,,, ,
,Juju's Text Engine,,,,Blocks are always 6 colums wide!,,,,,,,Dialogue box explanation,,,,
,v4 Frilly Knickers,,,1,2,3,4,5,6,,,,,,,
,14th December '15,,,,,,,,,,!!sB,,,,,
,,,,!!startBlock,,,,,,,diag0,Dialogue boxes are perfect for implementing text and dialogue trees in RPG or text/narrative-heavy games. They're also very useful in the mobile sphere where you may want to use them for various pieces of feedback.,,[green]Continue,,diag1
,@jujuadams,,,,"//You can put comments inside a block by using double slashes, much like GML",,,,,,diag1,"Much like [fontAbold]scr_juju_text[], the dialogue box system uses container objects to handle all the nitty-gritty for you. Create a dialogue box using [fontAbold]scr_juju_dialogue_box[] and the script will return an ",,[green]Continue,,diag2
,/u/jujuadams,,,//tag,//text,//check script,//option text,//script to run,//tag destination,,,instance id.##The dialogue box will destroy itself (and all dependent children instances) when the conversation ends. You can also manually destroy it using [fontAbold]instance_destroy().[],,,,
,Juju on the GMC,,,,,,,,,,diag2,"Dialogue trees are typically considered to be complex and time-consuming to put together in GameMaker. Fortunately, [fontBitalic]Frilly Knickers[] has you covered!##An in-built .csv loader allows you to make an ",,[green]Continue,,diag3
,,,,intro0,"[fontAbold]Hello![]##Welcome to [orange]Juju's Text Engine[/c], 22nd Dec '15#This is version 4 - [fontBitalic]""Frilly Knickers""[]##With thanks to [fontAbold]Drey Hager[] and [fontAbold]Runae Lee.[]#",,[green]Continue,,intro1,,,entire game's worth of text and dialogue on a spreadsheet. It's worth opening up the included .csv file to have a look at the format used.,,,,
,This is an extension/expansion of v3 Fancy Pants,,,,,,"[orange]Hey, go follow @jujuadams",scr_open_twitter,intro1,,diag3,"In brief, sections of dialogue are given [fontAitalic]tags[] that act as linking points. Each dialogue option routes the dialogue tree from one [fontAitalic]tag[] to another. Dialogue options can run scripts then they're ",,[green]Continue,,diag4
,http://gmc.yoyogames.com/index.php?showtopic=683788,,,intro1,"Version 4 is a step up. There's an entire dialogue system that is [green]easy to use[/c], [blue]easy to integrate[], and [red]easy to expand[/c].##",,[green]Ok,,intro10,,,"clicked.##For example, in a simple trader situation you may want to deduct money from a player's inventory whilst giving them an item. This can be triggered by a single script connected to a dialogue option.",,,,
,,,,,Juju's also fixed a fair few bugs as well. All the in-line formatting features from version 3 are still here in their new guise as [fontAitalic]styles[].#,,"[red]Wait up, I didn't use version 3. What's all this about?",,new0,,diag4,Dialogue options can also be removed on-the-fly by using a [fontAitalic]check script[]. This piece of dialogue text actually has two options but one of the options is simply turned off. This is great for implementing ,scr_always_false,[red]This won't show up :(,,
,"For more information on how the text rendering system works, please read the commenting in the attached project file.",,,new0,Version 3 [fontAitalic]Fancy Pants[] was a text engine that made in-line text formatting super easy. ,,[green]Continue,,new1,,,"secondary or optional dialogue trees depending on, say, a character's charisma score or if they're found the MacGuffin of Extra Content.",scr_always_true,[green]Back,,intro10
,,,,,"It used a tagging system, a little like BBCode or HTML formatting, to send commands to a text parser that did all the thinking for you. ",,,,,,!!eB,,,,,
,"This .csv loader operates on the principle of ""blocks"" of text. Each block is always treated as being 6 colums wide but",,,,"GameMaker doesn't do much to help you when drawing text, this text engine fills in the gaps.",,,,,,,,,,,
,is of indeterminate height. Only text that is inside these blocks is added to the database. This means you can put,,,,,,,,,,,,,,,
,"commentry etc. around your text in a natural, human-readable manner.",,,new1,"This engine uses individual objects to represent text on the screen. By calling [fontAbold]scr_juju_text()[], an instance is created that parses the text and does all the drawing ",,[green]Continue,,new2,,,,,,,
,,,,,for you. This instance will exist in the room until you tell it not to - [fontAbold]scr_juju_text()[] returns an instance id that you can destroy in the normal manner.,,,,,,!!sB,,,,,
,The markers !!startBlock and !!endBlock are used to define blocks of content and must be placed at the top and bottom,,,,,,,,,,commands0,Commands act as a special type of tag that allow specific commands to be executed whilst text is being displayed. Commands are executed once; typically this feature is used in conjunction with typewriter text. ,,[green]Continue,,commands1
,"of the first column. Each column, 1 through 6 inclusive, provide information for the database:",,,new2,[fontAbold]scr_juju_text()[] is very flexible. The text engine natively handles [fontAbold]text wrapping[] by placing customiseable limits on text width and also features ,,[green]Continue,,intro10,,,Example uses are triggering portrait animations using the [fontAitalic]!spr[] and [fontAitalic]!img[] commands or executing some kind of special effect.,,,,
,"c1: The internal tag that indentifies a piece of text. The script should return ""true"" or ""false"".",,,,character-by-character [fontAbold]typewriter[] display. Styles and Command Tags add even more options for creating dynamic and engaging text delivery.,,,,,,commands1,Here are a couple of examples.,,[green]Portraits,,commands2
,"c2: The text to show as the main text. This is, for example, what an NPC is saying to the player.",,,intro10,There's a lot to talk about so here's a brief overview of the new features. Have a click around and see what interests you. I strongly recommend you go through the ,,[green]Dialogue Boxes,,diag0,,,,,[green]Special Effects,,commands3
,c3: A script that controls the visibility of the option. See below. May be left blank.,,,,project file in detail.,,[green]Command Tags / Portraits,,commands0,,,,,[green]Back,,intro10
,c4: Text for the dialogue option.,,,,,,[green]Changes from v3,,changes0,,commands2,"The portrait on the left is[!img,L,1] angry! This used the [fontAitalic]!img[] command.[!delay,40] But wait, the red portrait is[!spr,R,spr_portrait_red_angry] angry too! This used the [fontAitalic]!spr[] command.##",,[green]Back,,commands1
,c5: A script to run when the player clicks on this particular option. This may be left blank.,,,,,,[red]Quit,,exit,,,"You can use [fontAitalic]delay[][!delay,20].[!delay,20].[!delay,20]. as well.##Don't forget to[!img,L,0][!spr,R,spr_portrait_red] reset your portraits after you've changed their sprite/image.",,,,
,c6: The tag to jump to when the player clicks this option. Leave blank to simply close the conversation.,,,exit,Thanks for swinging by. Don't forget to get in touch with @jujuadams if you have any feedback or questions.,,"[green]Wait, I hadn't finished",,intro10,,commands3,"This particular example uses the[!scr,scr_piggies] [fontAitalic]!scr[] command to launch a wing of flying pigs across the screen.",,[green]Back,,commands1
,,,,,,,"[orange]Hey, go follow @jujuadams",scr_open_twitter,intro10,,!!eB,,,,,
,Column 3 allows the developer to reference a script to control the appearance of a particular option. This can be used,,,,,,[red]Bye!,scr_done,,,,,,,,
,"to hide interactions based on, for example, the player character's alignment or charisma score. This script should return",,,!!endBlock,,,,,,,,,,,,
,"""true"" if the dialogue option is to be shown and ""false"" if the dialogue option is to be hidden.",,,,,,,,,,,,,,,
,,,,,,,,,,,!!sB,,,,,
,Text defined in columns 2 and 4 are run through the formatting script scr_juju_text() and can be formatted using the,,,,,,,,,,changes0,Juju has tried to keep the changes to the internal workings of the text engine (the formatting part) unchanged. The previous formatting system was pretty limited and didn't allow for much creativity,,[green]Continue,,changes1
,"same style tags as in scr_juju_text_formatting(), modified to however you'd like.",,,,,,,,,,changes1,[fontAitalic]Styles[] operate in a similar way to the previous formatting system only now they are executed in the Draw event rather than being pre-calculated by the parser. This means you can have active code in,,[green]Continue,,changes2
,,,,,,,,,,,,[fontAbold]scr_juju_text_styles()[]. This opens the door for some advanced effects.,,,,
,Please note that options must start on the same row as the main text (column 2).,,,,,,,,,,changes2,"There's a new dependency on the included scr_juju_font system which provides simple middleman management of fonts, adding the equivalent of [fontAitalic]draw_get_font()[]. Make sure that [fontAitalic]scr_font_init()[]",,[green]Back,,intro10
,,,,,,,,,,,,is called at the start of the game.,,,,
,The .csv files themselves may or not require a different delimiter depending on what text you're using. The default method,,,,,,,,,,!!eB,,,,,
,"of delimiting cells is a comma. Naturally, this gets in the way of generic speech which does tend to use rather a lot of",,,,,,,,,,,,,,,
,commas. I recommend using a vertical bar (ASCII character 124) to delimit cells and a grave accent (character 96) to,,,,,,,,,,,,,,,
,delimit text. These options are readily adjustable when saving your .csv file (you may need to use Save As in some,,,,,,,,,,,,,,,
,programs).,,,,,,,,,,!!sB,,,,,
,,,,,,,,,,,starter0,"In this brief tutorial, you'll learn how to draw some text to the screen with two different fonts in different colours and then destroy that text when the user presses a key.",,[green]Continue,,starter1
,,,,,,,,,,,starter1,"You'll need to import the following objects into your project: [fontAitalic]obj_juju_text, obj_juju_dialogue_box, obj_juju_dialogue_option, obj_juju_portrait[].##You'll need scripts from the [fontAitalic]Juju's Text Engine[] folder ",,[green]Continue,,starter2
,,,,,,,,,,,,in the scripts section of the resource tree.##Make sure you check that all the scripts have been correctly imported by checking the example project and your own.,,,,
,,,,,,,,,,,starter2,"At game start, you'll need to call the script [fontAitalic]scr_juju_font_init()[] add this script to a controller object. Add a font called [fontAbold]fnt_a[] and another font called [fontAbold]fnt_b[].",,[green]Continue,,starter3
,,,,,,,,,,,starter3,"In the create event of this controller object, add a command using [fontAitalic]scr_juju_text[]. For the purposes of the tutorial use this line:##",,[green]Continue,,starter4
,,,,,,,,,,,,"{}testInstance = scr_juju_text( 20, 20,   '[red]fnt_a[]. [fontB][blue]fnt_b[].', ' ',  'styleA',   ' ', ' ' );##Note the use of single quote marks here - due to the way GameMaker's string handling works,",,,,
,,,,,,,,,,,,you will not be able to use double quotes when loading from a .csv file.,,,,
,,,,,,,,,,,starter4,In the step event of the controller object add this code:##,,[green]Continue,,starter5
,,,,,,,,,,,,if ( keyboard_check_released( vk_anykey ) )#with ( testInstance ) instance_destroy();,,,,
,,,,,,,,,,,starter5,Place your controller instance in a room and start the project. Your text should look something like this:##[red]fnt_a[]. [fontB][blue]fnt_b[].#,,[green]Continue,,starter6
,,,,,,,,,,,,,,[green]Could you repeat that?,,starter1
,,,,,,,,,,,starter6,Now press a key and the text should disappear. Easy as that!,,[green]Back,,intro10
,,,,,,,,,,,!!eB,,,,,
